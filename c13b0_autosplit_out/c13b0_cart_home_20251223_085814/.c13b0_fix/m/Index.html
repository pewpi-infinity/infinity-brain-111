<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Infinity Vector Visualizer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        margin:0;
        overflow:hidden;
        background:black;
        font-family:Arial, sans-serif;
        color:white;
    }
    #overlay {
        position:absolute;
        top:10px;
        left:10px;
        z-index:10;
        background:rgba(0,0,0,0.4);
        padding:10px 14px;
        border-radius:12px;
        font-size:16px;
        backdrop-filter:blur(4px);
    }
</style>
</head>

<body>
<div id="overlay">Infinity Vector Visualizer — Pi Singing Machine</div>
<canvas id="c"></canvas>

<script>
// ------------------------------
// CANVAS SETUP
// ------------------------------
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
let w, h;

function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
}
window.onresize = resize;
resize();

// ------------------------------
// STAR / PARTICLE CLASS
// ------------------------------
class Particle {
    constructor() {
        this.reset();
    }

    reset() {
        this.x = Math.random() * w;
        this.y = Math.random() * h;
        this.baseSize = Math.random() * 2 + 0.5;
        this.size = this.baseSize;
        this.growth = (Math.random()*0.005)+0.002;
        this.angle = Math.random()*Math.PI*2;
        this.speed = (Math.random()*0.3)+0.05;
        this.color = "rgba(150,200,255," + (Math.random()*0.9+0.2) + ")";
    }

    update() {
        // twinkle (Watson particle pulse)
        this.size += this.growth;
        if (this.size > this.baseSize*3 || this.size < this.baseSize) {
            this.growth *= -1;
        }

        // drift movement
        this.x += Math.cos(this.angle)*this.speed;
        this.y += Math.sin(this.angle)*this.speed;

        // wrap
        if (this.x < 0) this.x = w;
        if (this.x > w) this.x = 0;
        if (this.y < 0) this.y = h;
        if (this.y > h) this.y = 0;
    }

    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
        ctx.fillStyle = this.color;
        ctx.shadowBlur = 12;
        ctx.shadowColor = this.color;
        ctx.fill();
    }
}

// ------------------------------
// GENERATE PARTICLE FIELD
// ------------------------------
let particles = [];
let count = 150;
for (let i=0; i<count; i++) particles.push(new Particle());

// ------------------------------
// DRAW VECTOR CONNECTIONS
// (like the 53-card deck webs)
// ------------------------------
function drawVectors() {
    let threshold = 120;

    for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < particles.length; j++) {

            let dx = particles[i].x - particles[j].x;
            let dy = particles[i].y - particles[j].y;
            let dist = Math.sqrt(dx*dx + dy*dy);

            if (dist < threshold) {
                let alpha = 1 - (dist / threshold);

                ctx.strokeStyle = "rgba(100,170,255," + alpha*0.5 + ")";
                ctx.lineWidth = 0.7;
                ctx.beginPath();
                ctx.moveTo(particles[i].x, particles[i].y);
                ctx.lineTo(particles[j].x, particles[j].y);
                ctx.stroke();
            }
        }
    }
}

// ------------------------------
// PI-SINGING MODULE (basic)
// ------------------------------
let t = 0;
function piTone() {
    let value = Math.sin(t) + Math.sin(t*3.14159); // π harmonic
    t += 0.02;

    // glow pulse overlay
    ctx.fillStyle = "rgba(60,120,255," + (0.02 + Math.abs(value)/8) + ")";
    ctx.fillRect(0,0,w,h);
}

// ------------------------------
// MAIN LOOP
// ------------------------------
function animate() {
    ctx.clearRect(0,0,w,h);

    // pulse
    piTone();

    // particles + vectors
    drawVectors();
    for (let p of particles) {
        p.update();
        p.draw();
    }

    requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>
